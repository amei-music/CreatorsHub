<html>
<head>
  <meta charset="UTF-8">
  <title>FM_MW1</title>
  <style type="text/css">
  <!--
  table, td, th {
    border: solid 1px #999999;
  }

  div#msg {
    overflow: scroll;   /* スクロール表示 */
    width: 600px;
    height: 400px;
    border: solid 1px #999999;
  }
  //-->
  </style>
  <!-- スタイルシート　-->
  <link rel="stylesheet" href="/mw1.css" type="text/css" media="all">

  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/mw1.js"></script> <!-- クライアント側の機能が詰まったctrlオブジェクトの読み込み -->
  <script type="text/javascript">
    "use strict";

    window.onload = function(){
      ctrl.init();
    }
  </script>

</head>
<body>
  <h1>接続中のデバイス</h1>	
  <div id="network"></div>

  <hr><!------------------------------------------------------------------->

  <h3>OSC接続をネットワークに登録する</h3>
  <table>
    <tr>
      <td>サーバーの受信ポートを追加</td>
      <td><button onclick="ctrl.open_new_osc_input();">追加</button></td>
    </tr>
    <tr>
      <td>送信先ホストを追加</td>
      <td>ホストアドレス<input  type="text" id="osc_host" style="width:120px;" />
          待ち受けポート番号<input type="text" id="osc_port" style="width:60px;" />
      <button onclick="ctrl.open_new_osc_output();">登録</button></td>
    </tr>
  </table>

  <hr><!------------------------------------------------------------------->
  <h3>メッセージ分析</h3>
  <table id="analyzer">
  </table>
  <hr><!------------------------------------------------------------------->

  <h3>仮想MIDI接続をネットワークに登録する</h3>
  <table>
    <tr>
      <td>仮想MIDI受信ポートを追加</td>
      <td>名前<input  type="text" id="vmidi_in" style="width:120px;" />
      <button onclick="ctrl.open_new_virtualmidi_input();">追加</button></td>
    </tr>
    <tr>
      <td>仮想MIDI出力ポートを追加</td>
      <td>名前<input  type="text" id="vmidi_out" style="width:120px;" />
      <button onclick="ctrl.open_new_virtualmidi_output();">追加</button></td>
    </tr>
  </table>
  
  <hr><!------------------------------------------------------------------->

  <h3>このページをJSONクライアントとしてネットワーク参加する</h3>
  <div id=jsonclient_join>
      <table><tr><td>
      <button onclick="ctrl.join_as_wsjson();">参加</button><br>
      </td></tr></table>
  </div>

  <div id=jsonclient>
    <table>
        <tr><td>
            <textarea name="msg_input" id="msg_input", cols="60", rows="8"> </textarea>
            <button onclick="ctrl.publishMessage();">JSONを送る</button>
            <button onclick="ctrl.exit_wsjson();">切断</button>
        </td></tr>
        <tr><td>
            <p id=errormsg> </p>
            <div id="msg"></div>
        </td></tr>
        <tr><td>
            filter:
            <input type="checkbox" onclick="ctrl.filterSet(this);" value="/fm/timing"> timing
            <input type="checkbox" onclick="ctrl.filterSet(this);" value="/fm/noteon"> noteon
            <input type="checkbox" onclick="ctrl.filterSet(this);" value="/fm/noteoff"> noteoff
            <input type="checkbox" onclick="ctrl.filterSet(this);" value="/fm/notepressure"> notepressure
            <input type="checkbox" onclick="ctrl.filterSet(this);" value="/fm/controlchange"> controlchange
            <input type="checkbox" onclick="ctrl.filterSet(this);" value="/fm/programchange"> programchange
            <input type="checkbox" onclick="ctrl.filterSet(this);" value="/fm/channelpressure"> channelpressure
            <input type="checkbox" onclick="ctrl.filterSet(this);" value="/fm/pitchbend"> pitchbend
       </td></tr>
       <tr><td>
            tempo: <span id="tempo"> </span>
       </td></tr>
    </table>
  </div>
  <hr><!------------------------------------------------------------------->

  <h3>結線情報の履歴をクリアする</h3>
     <table><tr><td>
     <button onclick="ctrl.cleanup_connection_history();">クリア</button><br>
     </td></tr></table>
</body>
</html>
